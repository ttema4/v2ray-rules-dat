# üá∑üá∫ Custom Xray Routing Rules (v2ray-rules-dat)

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ `geosite.dat` –∏ `geoip.dat` –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ –±–∞–∑–µ —è–¥—Ä–∞ **Xray / V2Ray**. 

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏ —Ç–æ—á–µ—á–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ *(split tunneling)* –≤ —Ä–µ–∞–ª–∏—è—Ö —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é: –ø—É—Å–∫–∞—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–∫–µ—Ä—ã –∏ —Ä–µ–∫–ª–∞–º—É, –∞ –æ—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ –ø—É—Å–∫–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –∏–∑ –†–æ—Å—Å–∏–∏.

## üì• –°—Å—ã–ª–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ)

–≠—Ç–∏ —Å—Å—ã–ª–∫–∏ **–≤—Å–µ–≥–¥–∞** —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–∞–º—É—é —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∞–≤–∏–ª –∏–∑ —Ç–µ–≥–∞ `latest`. –í—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å –∏—Ö –ø—Ä—è–º–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (Happ, v2rayN, v2rayNG, NekoBox, Hiddify) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

* üåç **geosite.dat:** `https://github.com/ttema4/v2ray-rules-dat/releases/download/latest/geosite.dat`
* üó∫Ô∏è **geoip.dat:** `https://github.com/ttema4/v2ray-rules-dat/releases/download/latest/geoip.dat`

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Actions –¥–ª—è CI/CD. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤–Ω–æ—Å—è—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏—Å—Ö–æ–¥–Ω—ã–µ —Å–ø–∏—Å–∫–∏, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –±–∞–∑—ã –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–ª–∏–∑.

* –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `domain/` —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–ø–∏—Å–∫–∏ –¥–æ–º–µ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `proxy-domain`, `direct-domain`).
* –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `ip/` —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–ø–∏—Å–∫–∏ IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ CIDR-–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `proxy-ip`, `direct-ip`).

## ü§ù –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—Ç—É opensource-—Å–æ–æ–±—â–µ—Å—Ç–≤–∞. –û—Ç–¥–µ–ª—å–Ω–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∞–º —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:

* üóÇ **[rekryt/iplist](https://github.com/rekryt/iplist)** ‚Äî –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º—É—é –±–∞–∑—É –¥–æ–º–µ–Ω–æ–≤ –∏ IP-–∞–¥—Ä–µ—Å–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –≤–∑—è—Ç–∞ –∑–∞ –æ—Å–Ω–æ–≤—É —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
* üõ† **[v2fly/domain-list-community](https://github.com/v2fly/domain-list-community)** ‚Äî –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–±–æ—Ä–∫–∏ —Ñ–∞–π–ª–∞ `geosite.dat`.
* üõ† **[v2fly/geoip](https://github.com/v2fly/geoip)** ‚Äî –∑–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ `geoip.dat`.

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Xray (config.json)

–°–∫–∞—á–∞–Ω–Ω—ã–µ `.dat` —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é Xray. –í –±–ª–æ–∫–µ `routing` –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≤–∞—à–∏–º —Å–ø–∏—Å–∫–∞–º –ø–æ –∏–º–µ–Ω–∞–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤. 

*–ü—Ä–∏–º–µ—Ä —Ä–æ—É—Ç–∏–Ω–≥–∞:*
```json
"routing": {
  "domainStrategy": "IpIfNonMatch",
  "rules": [
    {
      "type": "field",
      "outboundTag": "direct",
      "domain": [
        "ext:geosite.dat:direct-domain"
      ]
    },
    {
      "type": "field",
      "outboundTag": "proxy",
      "domain": [
        "ext:geosite.dat:proxy-domain" 
      ],
      "ip": [
        "ext:geoip.dat:proxy-ip"
      ]
    }
  ]
}
```